<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.company.MatchFootball.mapper.SungjunMapper"> <!-- 패키지.EmpMapper -->

	<!--해당 날의 개인 매치 조회 -->
	<select id="pmatchselect" parameterType="P_matchVO"
		resultType="P_matchVO">

		select * from p_match
		where m_date = #{m_date}
	</select>
	<!--point 내역 -->
	<select id="pointconselect" parameterType="PointVO"
		resultType="PointVO">
		select * from point
		where p_id =#{p_id} and <![CDATA[rownum <=3]]>
		order by p_date desc
	</select>
	<!--point 전체 내역 -->
	<select id="pointallselect" parameterType="PointVO"
		resultType="PointVO">
		SELECT * FROM point
		where p_id = #{p_id}
	</select>
	<!--p_match 내역 수 페이징 -->
	<select id="getCount1" resultType="int">
		SELECT COUNT(*) FROM p_match
		where m_id = #{m_id}
	</select>
	<!--경기 일정 조회 -->
	<select id="pmatchlist" parameterType="P_matchVO"
		resultType="P_matchVO">
		select * from( select a.*, rownum rn from (
		select * from p_match
		where m_id = #{m_id}
		order by m_no desc
		) a ) b where rn between #{first} and #{last}
	</select>
	<!-- 선택개인매치 조회 -->
	<select id="pmatchlist1" parameterType="P_matchVO"
		resultType="P_matchVO">
		select * from p_match
		where m_no = #{m_no}
	</select>
	<!-- 팀 매치 내역 조회 -->
	<select id="tmatchlist" parameterType="TeammatchVO"
		resultType="TeammatchVO">
		select * from( select a.*, rownum rn from (
		select * from teammatch
		where m_id = #{m_id}
		order by m_no desc
		) a ) b where rn between #{first} and #{last}
	</select>
	<!--멤버 조회 -->
	<select id="memberselect" parameterType="MembersVO"
		resultType="MembersVO">
		select * from members
		where id=#{id}
	</select>
	<!--개인매치 선수목록 조회 -->
	<select id="matchmember" parameterType="MatchMember" resultType="MatchMember">
		 select * from members
  		 where id in(
 			 select id from pplayers 
			 where  pplayers.m_no =#{m_no})
	</select>
</mapper>
